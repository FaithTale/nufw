.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "NUFW" "8" "12 mars 2007" "" ""

.SH NAME
nufw \- NUFW User filtering gateway server
.SH SYNOPSIS

\fBnufw\fR [ \fB-h\fR ] [ \fB-V\fR ] [ \fB-D\fR ] [ \fB-m\fR ] [ \fB-U\fR ] [ \fB-v[v...]\fR ] [ \fB-A \fIdebug_area\fB\fR ] [ \fB-k \fIkeyfile\fB\fR ] [ \fB-c \fIcertfile\fB\fR ] [ \fB-a \fIcafile\fB\fR ] [ \fB-d \fIaddress\fB\fR ] [ \fB-p \fI(remote) port\fB\fR ] [ \fB-t \fItimeout\fB\fR ] [ \fB-T \fItrack_size\fB\fR ] [ \fB-I \fIServerID\fB\fR ] [ \fB-q \fINfQueue_num\fB\fR ] [ \fB-C\fR ] [ \fB-M\fR ]

.SH "DESCRIPTION"
.PP
This manual page documents the
\fBnufw\fR command.
.PP
nufw is the minimalist server, designed to run on the gateway(s) of
the network. nufw is designed to run in conjunction with nuauth, the
authenticating server. nufw receives network packets from the local
firewall (on Linux 2.4 and 2.6, this is set up with the help of '-j QUEUE'
netfilter target), and synchronizes with a nuauth server to check packet is
authorized to travel through the gateway.
.PP
The design of the NUFW package lets administrator filter network
trafic per user, not only per IP. This means you can now deal with different
permissions for user A and user B, even if they work at the same moment,
on the same multiuser machine. In other words, this extends firewalling criterias to
userID, at the network scale.
.PP
Original packaging and informations and help can be found from http://www.nufw.org/
.SH "OPTIONS"
.TP
\fB-h \fR
Issues usage details and exits.
.TP
\fB-V \fR
Issues version and exits.
.TP
\fB-D \fR
Run as a daemon.
.TP
\fB-U \fR
Use UDP, unencrypted protocol for communication with the nuauth
server. This is NOT recommended.
.TP
\fB-m \fR
Mark packets with UserID. This requires the wvmark POM patch
applied to netfilter, and is necessary for per user QoS or routing.
.TP
\fB-v \fR
Increases debug level. Multiple switches are accepted and each
of them increases the debug level by one. Default debug level is 2, max is 10.
.TP
\fB-A \fIdebug_areas\fB \fR
Chooses debug_area. Default debug area is ALL. To select a subset add value from the following list:
.RS
.TP 0.2i
\(bu
DEBUG_AREA_MAIN (1) main domain
.TP 0.2i
\(bu
DEBUG_AREA_PACKET (2) packet domain
.TP 0.2i
\(bu
DEBUG_AREA_USER (4) user domain
.TP 0.2i
\(bu
DEBUG_AREA_GW (8) Gateway domain, interaction wit nufw servers.
.TP 0.2i
\(bu
DEBUG_AREA_AUTH (16) Authentication domain
.RE
.TP
\fB-k \fIkeyfile\fB \fR
Use specified file as SSL (private) key file.
.TP
\fB-c \fIcertfile\fB \fR
Use specified file as SSL (public) certificate file.
.TP
\fB-a \fIcafile\fB \fR
Use specified file as SSL certificate authority file. This
parameter is optional.
.TP
\fB-d \fIaddress\fB \fR
Network address of the nuauth server.
.TP
\fB-p \fIport\fB \fR
Specifies TCP port to send data to when addressing the nuauth
server. Nuauth server must be setup to
listen on that port. Default value : 4128
.TP
\fB-t \fIseconds\fB \fR
Specifies timeout to forget packets not answered for by nuauth.
Default value : 15 s.
.TP
\fB-T \fItrack_size\fB \fR
Set maximum number of packets that can wait a decision in nufw. Default value : 1000.
.TP
\fB-q \fINfQueue number\fB \fR
If Nufw was compiled with NfQueue support, Id of the NfQueue to
use (default : 0).
.TP
\fB-C \fR
listen to conntrack events (needed for connection expiration).
.TP
\fB-M \fR
only report event on marked connections to nuauth (implies -C and -m)

This is the way to do an efficient selection of events to be sent to nuauth but this REQUIRES a kernel with transmit_mark applied (should be ok for 2.6.18+) and the use of CONNMARK to propagate the initial mark accross all the packets of the connection.
.SH "SIGNALS"
.PP
The \fBnufw\fR daemon is designed to deal with several
signals : USR1, USR2, SYS, WINCH and POLL.
.TP
\fBUSR1 \fR
Increases verbosity. The daemon then acts as if it had been
launched with one supplementary '-v'.A line is also added to the system
log to mention the signal event.
.TP
\fBUSR2 \fR
Decreases verbosity. The daemon then acts as if it had been
launched with one less '-v'. A line is also added to the system
log to mention the signal event.
.TP
\fBSYS \fR
Removes the Conntrack events thread. This gets the daemon to
work as if the "-C" switch had not been set. This is useful on HA
configurations, when one firewall gets passive, for instance.
.TP
\fBWINCH \fR
Starts the Conntrack events thread. This gets the daemon to
work as if the "-C" switch had been set at startup. This is useful on HA
configurations, when one firewall gets active, for instance.
.TP
\fBPOLL \fR
Logs an "audit" line, mentionning how many network datagrams
were received and sent since daemon startup.
.SH "SEE ALSO"
.PP
nuauth(8)
.SH "AUTHOR"
.PP
Nufw was designed and coded by Eric Leblond, aka Regit (<eric@regit.org>) , and Vincent
Deffontaines, aka gryzor (<vincent@gryzor.com>). Original idea in 2001, while working on NSM Ldap
support.
.PP
This manual page was written by Vincent Deffontaines
.PP
Permission is
granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation
License, Version 2 as published by the Free
Software Foundation; with no Invariant Sections, no Front-Cover
Texts and no Back-Cover Texts.
